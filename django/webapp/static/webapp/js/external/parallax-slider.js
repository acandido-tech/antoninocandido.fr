var couleurs_fond = ["c8c9ca", "727272", "4fadef", "74982d"]; (function (a) { a.fn.parallaxSlider = function (f) { var g = a.extend({}, a.fn.parallaxSlider.defaults, f); return this.each(function () { var f = a(this), h = a.meta ? a.extend({}, g, f.data()) : g; var i = a(".pxs_slider", f), j = i.children(), k = j.length, l = a(".pxs_next", f), m = a(".pxs_prev", f), n = a(".pxs_bg1", f), o = a(".pxs_bg2", f), p = a(".pxs_bg3", f), q = 0, r = a(".pxs_thumbnails", f), s = r.children(), t, u = a(".pxs_loading", f), v = a(".pxs_slider_wrapper", f); var w = 0, x = v.find("img"); x.each(function () { var f = a(this); a("<img/>").load(function () { ++w; if (w == k * 2) { u.hide(); v.show(); var f = i.find("img:first").width(); e(i, j, k, n, o, p, f, l, m); r.css({ width: f + "px" }); var g = f / (k + 1); s.each(function (b) { var c = a(this); var d = g * (b + 1) - c.width() / 2; c.css("left", d + "px") }); d(s.eq(0)); a(document).keydown(function (a) { if (a.keyCode == 37) { --q; if (q < 0) if (h.circular) q = k - 1; else { ++q; return false } d(s.eq(q)); c(q, i, p, o, n, h.speed, h.easing, h.easingBg) } else if (a.keyCode == 39) { ++q; if (q >= k) if (h.circular) q = 0; else { --q; return false } d(s.eq(q)); c(q, i, p, o, n, h.speed, h.easing, h.easingBg) } }); l.bind("click", function () { ++q; if (q >= k) if (h.circular) q = 0; else { --q; return false } d(s.eq(q)); c(q, i, p, o, n, h.speed, h.easing, h.easingBg) }); m.bind("click", function () { --q; if (q < 0) if (h.circular) q = k - 1; else { ++q; return false } d(s.eq(q)); c(q, i, p, o, n, h.speed, h.easing, h.easingBg) }); s.bind("click", function () { var b = a(this); d(b); if (h.auto) clearInterval(t); q = b.index(); c(q, i, p, o, n, h.speed, h.easing, h.easingBg) }); if (h.auto != 0) { h.circular = true; t = setInterval(function () { l.trigger("click") }, h.auto) } a(window).resize(function () { b = a(window).width(); e(i, j, k, n, o, p, f, l, m); c(q, i, p, o, n, 1, h.easing, h.easingBg) }) } }).error(function () { alert("here") }).attr("src", f.attr("src")) }) }) }; var b = a(window).width(); var c = function (c, d, e, f, g, h, i, j) { var k = parseInt(-b * c); d.stop().animate({ left: k + "px" }, h, i); e.stop().animate({ left: k / 2 + "px" }, h, j); f.stop().animate({ left: k / 4 + "px" }, h, j); g.stop().animate({ left: k / 8 + "px" }, h, j); a("#pxs_container").stop().animate({ backgroundColor: "#" + couleurs_fond[c] }, h) }; var d = function (a) { a.siblings().removeClass("selected"); a.addClass("selected") }; var e = function (a, c, d, e, f, g, h, i, j) { var k = b * d; a.width(k + "px"); c.width(b + "px"); e.width(k + "px"); f.width(k + "px"); g.width(k + "px"); var l = b / 2 - h / 2 - 100; i.css("float", "right"); j.css("float", "left") }; a.fn.parallaxSlider.defaults = { auto: 4000, speed: 1000, easing: "jswing", easingBg: "jswing", circular: true, thumbRotation: false } })(jQuery)
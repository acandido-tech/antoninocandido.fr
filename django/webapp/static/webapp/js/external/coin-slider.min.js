(function (a) { var b = new Array; var c = new Array; var d = new Array; var e = new Array; var f = new Array; var g = new Array; var h = new Array; var l = new Array; var m = new Array; var n = new Array; a.fn.coinslider = a.fn.CoinSlider = function (o) { init = function (g) { c[g.id] = new Array; d[0] = new Array; e[g.id] = new Array; f[g.id] = new Array; h[g.id] = 0; m[g.id] = 0; n[g.id] = 1; b[g.id] = a.extend({}, a.fn.coinslider.defaults, o); a.each(a("#" + g.id + " img"), function (b, c) { e[g.id][b] = a(c).attr("src"); a(c).hide(); a(c).next().hide() }); a(g).css({ "background-image": "url(" + e[g.id][0] + ")", width: b[g.id].width, height: b[g.id].height, position: "relative", "background-position": "top left" }).wrap("<div class='coin-slider' id='coin-slider-" + g.id + "' />"); a("#" + g.id).append("<div class='cs-title' id='cs-title-" + g.id + "' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>"); if (b[g.id].effect == "fade") { b[g.id].spw = 1; b[g.id].sph = 1 } a.setFields(g); if (b[g.id].navigation) a.setNavigation(g); a.transition(g, 0); a.transitionCall(g) }; a.setFields = function (d) { tWidth = sWidth = parseInt(b[d.id].width / b[d.id].spw); tHeight = sHeight = parseInt(b[d.id].height / b[d.id].sph); counter = sLeft = sTop = 0; tgapx = gapx = b[d.id].width - b[d.id].spw * sWidth; tgapy = gapy = b[d.id].height - b[d.id].sph * sHeight; for (i = 1; i <= b[d.id].sph; i++) { gapx = tgapx; if (gapy > 0) { gapy--; sHeight = tHeight + 1 } else { sHeight = tHeight } for (j = 1; j <= b[d.id].spw; j++) { if (gapx > 0) { gapx--; sWidth = tWidth + 1 } else { sWidth = tWidth } c[d.id][counter] = i + "" + j; counter++; a("#" + d.id).append("<div class='cs-" + d.id + "' id='cs-" + d.id + i + j + "' style='width:" + sWidth + "px; height:" + sHeight + "px; float: left; position: absolute;'></div>"); a("#cs-" + d.id + i + j).css({ "background-position": -sLeft + "px " + (-sTop + "px"), left: sLeft, top: sTop }); sLeft += sWidth } sTop += sHeight; sLeft = 0 } a(".cs-" + d.id).mouseover(function () { if (a("#cs-button-" + d.id + "-" + (h[d.id] + 1)).is(".cs-notactiv")) { a("#cs-navigation-" + d.id).hide() } else { a("#cs-navigation-" + d.id).show() } }); a(".cs-" + d.id).mouseout(function () { a("#cs-navigation-" + d.id).hide() }); a("#cs-title-" + d.id).mouseover(function () { if (a("#cs-button-" + d.id + "-" + (h[d.id] + 1)).is(".cs-notactiv")) { a("#cs-navigation-" + d.id).hide() } else { a("#cs-navigation-" + d.id).show() } }); a("#cs-title-" + d.id).mouseout(function () { a("#cs-navigation-" + d.id).hide() }); if (b[d.id].hoverPause) { a(".cs-" + d.id).mouseover(function () { b[d.id].pause = true }); a(".cs-" + d.id).mouseout(function () { b[d.id].pause = false }); a("#cs-title-" + d.id).mouseover(function () { b[d.id].pause = true }); a("#cs-title-" + d.id).mouseout(function () { b[d.id].pause = false }) } }; a.transitionCall = function (c) { clearInterval(g[c.id]); delay = b[c.id].delay + b[c.id].spw * b[c.id].sph * b[c.id].sDelay; g[c.id] = setInterval(function () { a.transition(c) }, delay) }; a.transition = function (g, i) { a.each(a("div#galerie-client img"), function (b, c) { d[0][b] = a(c).attr("src") }); var j = d[0].length; if (b[g.id].pause == true) return; a.effect(g); m[g.id] = 0; l[g.id] = setInterval(function () { a.appereance(g, c[g.id][m[g.id]]) }, b[g.id].sDelay); a(g).css({ "background-image": "url(" + e[g.id][h[g.id]] + ")" }); if (typeof i == "undefined") h[g.id]++; else if (i == "prev") h[g.id]--; else h[g.id] = i; if (h[g.id] == e[g.id].length) { h[g.id] = 0 } if (h[g.id] == -1) { h[g.id] = e[g.id].length - 1 } a(".cs-button-" + g.id).removeClass("cs-active"); if (j == 1) { a("#cs-button-" + g.id + "-" + (h[g.id] + 1)).hide(); a("#cs-button-" + g.id + "-" + (h[g.id] + 1)).addClass("cs-notactiv") } else { a("#cs-button-" + g.id + "-" + (h[g.id] + 1)).addClass("cs-active"); a("#cs-button-" + g.id + "-" + (h[g.id] + 1)).removeClass("cs-notactiv") } a("#cs-button-" + g.id + "-" + (h[g.id] + 1)).addClass("cs-active"); if (f[g.id][h[g.id]]) { a("#cs-title-" + g.id).css({ opacity: 0 }).animate({ opacity: b[g.id].opacity }, b[g.id].titleSpeed); a("#cs-title-" + g.id).html(f[g.id][h[g.id]]) } else { a("#cs-title-" + g.id).css("opacity", 0) } }; a.appereance = function (c, d) { if (m[c.id] == b[c.id].spw * b[c.id].sph) { clearInterval(l[c.id]); return } a("#cs-" + c.id + d).css({ opacity: 0, "background-image": "url(" + e[c.id][h[c.id]] + ")" }); a("#cs-" + c.id + d).animate({ opacity: 1 }, 300); m[c.id]++ }; a.setNavigation = function (c) { a(c).append("<div id='cs-navigation-" + c.id + "'></div>"); a("#cs-navigation-" + c.id).hide(); a("#cs-navigation-" + c.id).append("<a href='#' id='cs-prev-" + c.id + "' class='cs-prev'>Précédent</a>"); a("#cs-navigation-" + c.id).append("<a href='#' id='cs-next-" + c.id + "' class='cs-next'>Suivant</a>"); a("#cs-prev-" + c.id).css({ position: "absolute", top: b[c.id].height / 2 - 15, left: 0, "z-index": 1001, "line-height": "30px", opacity: b[c.id].opacity }).click(function (b) { b.preventDefault(); a.transition(c, "prev"); a.transitionCall(c) }).mouseover(function () { a("#cs-navigation-" + c.id).show() }); a("#cs-next-" + c.id).css({ position: "absolute", top: b[c.id].height / 2 - 15, right: 0, "z-index": 1001, "line-height": "30px", opacity: b[c.id].opacity }).click(function (b) { b.preventDefault(); a.transition(c); a.transitionCall(c) }).mouseover(function () { a("#cs-navigation-" + c.id).show() }); a("<div id='cs-buttons-" + c.id + "' class='cs-buttons'></div>").appendTo(a("#coin-slider-" + c.id)); for (k = 1; k < e[c.id].length + 1; k++) { a("#cs-buttons-" + c.id).append("<a href='#' class='cs-button-" + c.id + "' id='cs-button-" + c.id + "-" + k + "'>" + k + "</a>") } a.each(a(".cs-button-" + c.id), function (b, d) { a(d).click(function (d) { a(".cs-button-" + c.id).removeClass("cs-active"); a(this).addClass("cs-active"); d.preventDefault(); a.transition(c, b); a.transitionCall(c) }) }); a("#cs-navigation-" + c.id + " a").mouseout(function () { a("#cs-navigation-" + c.id).hide(); b[c.id].pause = false }); a("#cs-buttons-" + c.id).css({ left: "50%", "margin-left": -e[c.id].length * 15 / 2 - 5, position: "relative" }) }; a.effect = function (d) { eff = b[d.id].effect; c[d.id] = new Array; if (eff == "fade") a.fade(d); n[d.id] *= -1; if (n[d.id] > 0) { c[d.id].reverse() } }; a.fade = function (a) { counter = 0; for (i = 1; i <= 1; i++) { for (j = 1; j <= 1; j++) { c[a.id][counter] = i + "" + j; counter++ } } }; a.min = function (a, b) { if (a > b) return b; else return a }; a.max = function (a, b) { if (a < b) return b; else return a }; this.each(function () { init(this) }) }; a.fn.coinslider.defaults = { width: 563, height: 392, spw: 7, sph: 5, delay: 3e3, sDelay: 200, opacity: .8, titleSpeed: 500, effect: "fade", navigation: true, hoverPause: true } })(jQuery)